<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notifications Management - MyFi Admin</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin/notifications.css') }}">
</head>
<body>
    <div class="admin-header">
        <h1>ğŸ”” Notifications Management</h1>
        <div class="header-actions">
            <a href="/admin/dashboard" class="back-link">â† Dashboard</a>
            <button class="logout-btn" onclick="logout()">Logout</button>
        </div>
    </div>

    <div class="container">
        <!-- Send Notification Card -->
        <div class="card">
            <h2>ğŸ“¢ Send Notification</h2>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Target Audience</label>
                    <select id="target">
                        <option value="all">All Users</option>
                        <option value="single">Single User</option>
                    </select>
                </div>
                
                <div class="form-group" id="userSelectGroup" style="display:none;">
                    <label>Select User</label>
                    <select id="userId">
                        <option value="">Loading users...</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Category</label>
                    <select id="category">
                        <option value="system">ğŸ”§ System</option>
                        <option value="service">ğŸ“¡ Service Update</option>
                        <option value="promo">ğŸ Promotion</option>
                        <option value="weather">â˜ï¸ Weather</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Priority</label>
                    <select id="priority">
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                        <option value="urgent">Urgent</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label>Title (max 100 characters)</label>
                <input type="text" id="title" placeholder="e.g., Welcome to Myfi!" maxlength="100">
                <span class="char-count" id="titleCount">0/100</span>
            </div>
            
            <div class="form-group">
                <label>Message (max 500 characters)</label>
                <textarea id="message" placeholder="Notification message..." rows="5" maxlength="500"></textarea>
                <span class="char-count" id="messageCount">0/500</span>
            </div>
            
            <!-- Preview -->
            <div class="notification-preview" id="preview" style="display:none;">
                <div class="preview-label">Preview:</div>
                <div class="preview-card">
                    <div class="preview-icon" id="previewIcon">ğŸ””</div>
                    <div class="preview-content">
                        <div class="preview-title" id="previewTitle">Notification Title</div>
                        <div class="preview-message" id="previewMessage">Notification message will appear here...</div>
                    </div>
                </div>
            </div>
            
            <div class="button-group">
                <button id="previewBtn" class="btn btn-secondary">ğŸ‘ï¸ Preview</button>
                <button id="sendBtn" class="btn btn-primary">Send Notification</button>
            </div>
            
            <div id="statusMessage" class="status-message" style="display:none;"></div>
        </div>
        
        <!-- Quick Templates -->
        <div class="card">
            <h2>âš¡ Quick Templates</h2>
            <div class="templates-grid">
                <button class="template-btn" onclick="useTemplate('welcome')">
                    ğŸ‰ Welcome Message
                </button>
                <button class="template-btn" onclick="useTemplate('maintenance')">
                    ğŸ”§ Maintenance Alert
                </button>
                <button class="template-btn" onclick="useTemplate('promo')">
                    ğŸ Promotion
                </button>
                <button class="template-btn" onclick="useTemplate('weather')">
                    â˜ï¸ Weather Alert
                </button>
            </div>
        </div>
        
        <!-- Recent Notifications -->
        <div class="card">
            <h2>ğŸ“‹ Recent Notifications (Last 20)</h2>
            <div id="recentNotifications">
                <div class="loading">Loading...</div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/admin/notifications.js') }}"></script>
</body>
</html>
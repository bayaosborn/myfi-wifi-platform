<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Create Group - MyFi</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      color: #000;
      margin: 0;
      padding: 20px;
    }
    h1 { color: #0051ff; text-align: center; }
    .container {
      max-width: 500px;
      margin: 0 auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
    }
    input {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      box-sizing: border-box;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    button {
      width: 100%;
      padding: 12px;
      background: #0051ff;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      margin: 10px 0;
    }
    button:hover { background: #0040cc; }
    .info {
      background: #e7f3ff;
      padding: 15px;
      border-radius: 4px;
      margin: 15px 0;
    }
    .message {
      padding: 15px;
      margin: 10px 0;
      border-radius: 4px;
      text-align: center;
    }
    .success {
      background: #d4edda;
      color: #155724;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Create New Group</h1>
    
    <div class="info">
      <strong>Group Details:</strong><br>
      • 4 members needed<br>
      • 100 KSH per person<br>
      • 50 KSH discount applied<br>
      • <strong>Total: 350 KSH</strong>
    </div>
    
    <form id="createForm">
      <input type="text" name="group_name" placeholder="Group Name (e.g., Room 3A WiFi)" required>
      <input type="text" name="member_name" placeholder="Your Name" required>
      <input type="tel" name="phone" placeholder="Your Phone Number" required>
      <button type="submit">Create Group</button>
    </form>
    
    <div id="message"></div>
  </div>

  <script>
    document.getElementById('createForm').onsubmit = async (e) => {
      e.preventDefault();
      const form = e.target;
      
      const res = await fetch('/api/create-group', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
          group_name: form.group_name.value,
          member_name: form.member_name.value,
          phone: form.phone.value
        })
      });
      
      const data = await res.json();
      
      if (res.ok) {
        document.getElementById('message').innerHTML = `
          <div class="message success">
            Group created!<br>
            <strong>Share this code: ${data.group_code}</strong><br><br>
            <button onclick="location.href='/my-account'">Go to My Account</button>
          </div>
        `;
        form.style.display = 'none';
      }
    };
  </script>
</body>
</html>
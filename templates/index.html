<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>MyFi – Quick Connect</title>
  <link rel="manifest" href="/static/manifest.json">
  <meta name="theme-color" content="#0051ff">
  
  <!-- External CSS -->
  <link rel="stylesheet" href="/static/css/main.css">
  <link rel="stylesheet" href="/static/css/modal.css">
</head>

<body>
  <div><img src="/static/logo.svg" alt="MyFi" width="65"></div>
  <div class="logo">myfi</div>

  <div class="qr-placeholder">
    {% if qr_image %}
      <img src="data:image/png;base64,{{ qr_image }}" alt="Wi-Fi QR Code">
    {% endif %}
  </div>

  <form id="scanForm" action="/generate_qr" method="post">
    <button class="scan-btn" type="submit">Scan</button>
  </form>

  <div id="message" class="message"></div>

  <div class="links">
    <a href="/groups" class="link">Find Groups</a>
    <a href="#" onclick="openAuthModal()" class="link">Account</a>
  </div>

  <!-- AUTH MODAL -->
  <div id="authModal" class="modal">
    <div class="modal-content">
      <h2 id="authTitle">Sign Up</h2>
      <form id="authForm">
        <input type="text" id="usernameInput" name="username" placeholder="Username (no spaces)" required>
        <input type="password" name="password" placeholder="Password" required>
        <input type="tel" id="mpesaInput" name="mpesa_phone" placeholder="M-PESA (0712345678)" required>
        <button type="submit" class="btn-blue" id="authSubmit">Sign Up</button>
      </form>
      <div class="toggle">
        <span id="toggleText">Already have an account? <a id="toggleLink">Login</a></span>
      </div>
      <div id="authMessage" class="message"></div>
    </div>
  </div>

  <!-- PAYMENT MODAL -->
  <div id="paymentModal" class="modal">
    <div class="modal-content">
      <h2>Credit Wallet</h2>
      <p>Send <strong>100 KSh</strong> to:</p>
      <div class="copy-section">
        <span id="mpesaNumber">0741641828</span>
        <button type="button" class="btn-blue" style="width:auto; padding:8px 15px;" onclick="copyMpesa()">Copy</button>
      </div>
      <p style="font-size:14px;">After sending, click below:</p>
      <button type="button" class="btn-blue" onclick="confirmPaymentSent()">I've Sent Payment</button>
      <button type="button" class="btn-red" onclick="closePaymentModal()">Close</button>
    </div>
  </div>

  <!-- PENDING NOTICE -->
  <div id="pendingNotice">
    Payment pending verification...
    <button onclick="dismissPending()" style="background:none;border:none;color:white;margin-left:10px;cursor:pointer;">✕</button>
  </div>

  <script src="/static/js/main.js"></script>
</body>
</html>